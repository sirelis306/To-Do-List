<div class="modal-backdrop" (click)="onCerrar()"></div>
<div class="modal-content">
  <button class="close-btn" (click)="onCerrar()">×</button>
  <h2>Nueva Tarea</h2>

  <div class="nueva-tarea-form">
    <input type="text" placeholder="¿Qué necesitas hacer?" [(ngModel)]="nuevaTareaTitulo"/>
  </div>

  <div class="nueva-tarea-form">
    <app-category-autocomplete 
      (categoriaSeleccionada)="onCategoriaCambia($event)">
    </app-category-autocomplete>
  </div>

 <div class="nueva-tarea-form">
    <app-custom-dropdown
      label="Importancia"
      [options]="opcionesImportancia"
      [selectedValue]="nuevaTareaImportancia"
      (valueChange)="onImportanciaChange($event)"
    ></app-custom-dropdown>
  </div>

  <div class="subtasks-section">
    <h3>Sub-tareas ({{ subtareasCompletadas }}/{{ totalSubtareas }})</h3>
    
    <div class="add-subtask-form">
      <input type="text" placeholder="Añadir sub-tarea..." [(ngModel)]="nuevoSubtareaDescripcion" (keyup.enter)="agregarSubtarea()"/>
      <button class="add-subtask-btn" (click)="agregarSubtarea()">
        <i class="fa-solid fa-plus"></i>
      </button>
    </div>

    <div class="subtask-list">
      @for (subtarea of nuevasSubtareas; track $index) {
        <div class="subtask-item">
          <span class="subtask-label">{{ subtarea }}</span>
          <button class="delete-subtask-btn" (click)="eliminarSubtarea($index)">
            <i class="fa-solid fa-trash"></i>
          </button>
        </div>
      }
    </div>

  <button class="add-task-btn" (click)="onAgregarTarea()">Añadir Tarea</button>
</div>
